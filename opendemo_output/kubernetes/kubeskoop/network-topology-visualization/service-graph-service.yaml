apiVersion: v1
kind: Service
metadata:
  name: service-graph
  annotations:
    # 注解可用于可视化工具识别服务类型
    grafana_dashboard: "network-topology"
spec:
  selector:
    app: topology-collector
  ports:
    - name: metrics
      protocol: TCP
      port: 80
      targetPort: 8080
  type: ClusterIP
  # ClusterIP确保服务仅在集群内部可访问，保障安全性