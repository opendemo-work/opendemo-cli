apiVersion: v1
kind: Service
metadata:
  name: web-service
  labels:
    app: web-service
spec:
  selector:
    app: web-server  # 必须与Pod的标签匹配
  ports:
    - protocol: TCP
      port: 80        # Service对外暴露的端口
      targetPort: 8080 # Pod容器实际监听的端口
  type: ClusterIP     # 集群内部访问
---
# 此配置将创建一个名为web-service的Service
# 其通过TCP协议将流量转发至标签为app=web-server的Pod的8080端口
# ClusterIP类型仅允许集群内访问，适合微服务间调用