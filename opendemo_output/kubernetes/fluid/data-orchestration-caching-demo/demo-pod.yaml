apiVersion: v1
kind: Pod
metadata:
  name: data-orchestration-pod
  labels:
    app: data-orchestration-demo
spec:
  # 最佳实践：为 Pod 设置明确的标签以便选择
  containers:
    - name: writer
      image: busybox:1.35
      command: ["sh", "-c", "sleep 3600"]
      envFrom:
        - configMapRef:
            name: app-config
            prefix: APP_  # 最佳实践：为注入的环境变量添加前缀避免冲突
      volumeMounts:
        - name: cache-volume
          mountPath: /cache
        - name: app-config-volume
          mountPath: /etc/config
          readOnly: true
    - name: reader
      image: busybox:1.35
      command: ["sh", "-c", "sleep 3600"]
      volumeMounts:
        - name: cache-volume
          mountPath: /cache
  # 最佳实践：使用独立卷分别管理配置与数据
  volumes:
    - name: cache-volume
      emptyDir: {}
      # EmptyDir 用于 Pod 内临时数据共享，适合缓存场景
    - name: app-config-volume
      configMap:
        name: app-config
        # 将 ConfigMap 作为卷挂载，实现配置与镜像解耦
  # 最佳实践：设置重启策略为默认值
  restartPolicy: Always