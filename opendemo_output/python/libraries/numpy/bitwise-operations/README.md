# Bitwise Operations Demo

## 简介
本项目是一个用于演示Python中位运算（Bitwise Operations）的完整学习示例。通过两个实用场景——权限控制系统和二进制标志管理，帮助初学者理解位运算的实际应用。

## 学习目标
- 理解Python中的6种基本位运算符：&、|、^、~、<<、>>
- 掌握如何使用位运算实现高效的权限控制
- 学会利用位标志（bit flags）管理多个布尔状态
- 提升对二进制表示和底层数据操作的理解

## 环境要求
- Python 3.7 或更高版本
- 操作系统：Windows、Linux、macOS 均支持

## 安装依赖的详细步骤
1. 确保已安装Python：打开终端或命令行，运行以下命令检查版本：
   ```bash
   python --version
   # 或
   python3 --version
   ```
   如果未安装，请前往 [https://www.python.org/downloads/](https://www.python.org/downloads/) 下载并安装。

2. 本项目无外部依赖，无需额外安装包。

## 文件说明
- `code/permissions.py`: 使用位运算实现用户权限控制系统的示例
- `code/bit_flags.py`: 使用位标志管理多项设置的示例
- `requirements.txt`: 依赖声明文件（空，因无第三方库）

## 逐步实操指南

### 步骤1：创建项目目录结构
```bash
mkdir bitwise-demo
cd bitwise-demo
mkdir code
```

### 步骤2：复制代码文件
将 `permissions.py` 和 `bit_flags.py` 的内容分别保存到 `code/permissions.py` 和 `code/bit_flags.py`。

### 步骤3：运行权限控制示例
```bash
python code/permissions.py
```

**预期输出**：
```
用户当前权限: read(✔) write(✔) execute(✘) delete(✘)
授予写入和删除权限...
用户当前权限: read(✔) write(✔) execute(✘) delete(✔)
用户是否有删除权限? True
撤销读取权限...
用户当前权限: read(✘) write(✔) execute(✘) delete(✔)
```

### 步骤4：运行位标志示例
```bash
python code/bit_flags.py
```

**预期输出**：
```
初始设置: 音效开, 音乐关, 自动保存开, 高对比度关
切换音乐状态...
当前设置: 音效开, 音乐开, 自动保存开, 高对比度关
启用高对比度模式...
当前设置: 音效开, 音乐开, 自动保存开, 高对比度开
是否启用了自动保存? 是
```

## 代码解析

### `permissions.py` 关键点
- 使用左移 `<<` 创建唯一的权限位（如 `READ = 1 << 0`）
- 使用按位或 `|=` 添加权限
- 使用按位与 `&` 检查是否拥有某权限
- 位运算使得多个权限可以压缩在一个整数中存储和操作

### `bit_flags.py` 关键点
- 将每个布尔设置映射为一个位
- 使用异或 `^` 切换开关状态（如音乐开/关）
- 使用与操作 `&` 检测某个标志是否被设置
- 极大地节省内存并提高状态判断效率

## 预期输出示例
见上文“逐步实操指南”中的输出部分。

## 常见问题解答

**Q: 为什么使用位运算而不是布尔变量？**
A: 位运算更节省内存，适合管理大量互斥或组合状态，且在底层系统和嵌入式开发中非常高效。

**Q: `1 << n` 是什么意思？**
A: 将数字1向左移动n位，等价于 $2^n$，用于生成唯一的二进制位标识。

**Q: 异或 `^` 如何用于切换状态？**
A: 因为 `x ^ 1 = ~x` 当x为0或1时成立，所以对某一位异或1可实现开关效果。

**Q: 负数的位运算是什么结果？**
A: Python中负数使用补码表示，`~x` 等价于 `-x-1`，需注意符号扩展。

## 扩展学习建议
- 尝试实现一个支持角色的多级权限系统
- 使用位运算实现简单的加密/解密算法（如XOR加密）
- 学习位运算在图像处理、网络协议解析中的应用
- 阅读Python源码中关于`os.chmod()`等系统调用的实现
- 探索 `enum.IntFlag` 类，它是位标志的高级封装